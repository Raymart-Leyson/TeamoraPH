[{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\admin\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\candidate\\dashboard\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4617,4620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4617,4620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\candidate\\messages\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\candidate\\messages\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\candidate\\profile\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\candidate\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\jobs\\[id]\\applications\\[applicationId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardFooter' is defined but never used.","line":4,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":79,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardFooter"},"fix":{"range":[226,238],"text":""},"desc":"Remove unused variable \"CardFooter\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getUserProfile } from \"@/utils/auth\";\r\nimport { createClient } from \"@/utils/supabase/server\";\r\nimport { notFound, redirect } from \"next/navigation\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, MessageSquare, Check, X, Building } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport default async function ApplicationDetailPage({ params }: { params: { id: string, applicationId: string } }) {\r\n    const profile = await getUserProfile();\r\n    if (!profile || profile.role !== \"employer\") {\r\n        redirect(\"/login\");\r\n    }\r\n\r\n    const supabase = await createClient();\r\n\r\n    const { data: application, error } = await supabase\r\n        .from(\"applications\")\r\n        .select(`\r\n      *,\r\n      job:job_posts!inner(id, title, author_id),\r\n      candidate:candidate_profiles(*)\r\n    `)\r\n        .eq(\"id\", params.applicationId)\r\n        .single();\r\n\r\n    if (error || !application || application.job.author_id !== profile.id) {\r\n        notFound(); // Protect against viewing unauthorized applications\r\n    }\r\n\r\n    const candidate = Array.isArray(application.candidate) ? application.candidate[0] : application.candidate;\r\n    const name = candidate?.first_name && candidate?.last_name\r\n        ? `${candidate.first_name} ${candidate.last_name}`\r\n        : \"Anonymous Candidate\";\r\n\r\n    return (\r\n        <div className=\"flex-1 space-y-8 p-8 pt-10\">\r\n            <div className=\"flex items-center space-x-4 mb-4\">\r\n                <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                    <Link href={`/employer/jobs/${params.id}`}><ArrowLeft className=\"h-5 w-5\" /></Link>\r\n                </Button>\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold tracking-tight\">Application: {name}</h2>\r\n                    <p className=\"text-muted-foreground mt-2\">Applied for {application.job.title} on {new Date(application.created_at).toLocaleDateString()}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                <Card className=\"col-span-2\">\r\n                    <CardHeader>\r\n                        <CardTitle>Candidate Profile</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-6\">\r\n                        <div>\r\n                            <h3 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-2\">Summary</h3>\r\n                            <p className=\"text-foreground leading-relaxed whitespace-pre-wrap\">\r\n                                {candidate?.bio || \"The candidate did not provide a summary.\"}\r\n                            </p>\r\n                        </div>\r\n                        {candidate?.skills && candidate.skills.length > 0 && (\r\n                            <div>\r\n                                <h3 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-2\">Skills</h3>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {candidate.skills.map((skill: string) => (\r\n                                        <Badge key={skill} variant=\"secondary\">{skill}</Badge>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"bg-muted/30\">\r\n                        <CardTitle>Actions</CardTitle>\r\n                        <CardDescription>Status: <span className=\"capitalize font-semibold text-foreground\">{application.status}</span></CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4 pt-6\">\r\n                        <form action={async () => {\r\n                            \"use server\";\r\n                            const client = await createClient();\r\n\r\n                            // Start conversation workflow\r\n                            // First, check if conversation exists\r\n                            // This relies on the unique constraint `application_id`\r\n                            const { data: existingChat } = await client\r\n                                .from(\"conversations\")\r\n                                .select(\"id\")\r\n                                .eq(\"application_id\", application.id)\r\n                                .single();\r\n\r\n                            if (existingChat) {\r\n                                redirect(`/employer/messages/${existingChat.id}`);\r\n                            } else {\r\n                                const { data, error } = await client.from(\"conversations\").insert({\r\n                                    application_id: application.id,\r\n                                    employer_id: profile.id,\r\n                                    candidate_id: candidate.id\r\n                                }).select(\"id\").single();\r\n\r\n                                if (!error && data) {\r\n                                    redirect(`/employer/messages/${data.id}`);\r\n                                }\r\n                            }\r\n                        }}>\r\n                            <Button className=\"w-full flex justify-center items-center gap-2\" variant=\"default\">\r\n                                <MessageSquare className=\"w-4 h-4\" /> Message Candidate\r\n                            </Button>\r\n                        </form>\r\n\r\n                        {/* Add simple action buttons that update status directly via server forms */}\r\n                        {application.status === 'pending' && (\r\n                            <>\r\n                                <form action={async () => {\r\n                                    \"use server\";\r\n                                    const client = await createClient();\r\n                                    await client.from(\"applications\").update({ status: 'shortlisted' }).eq(\"id\", application.id);\r\n                                    revalidatePath(`/employer/jobs/${params.id}/applications/${params.applicationId}`);\r\n                                }}>\r\n                                    <Button className=\"w-full flex justify-center items-center gap-2 bg-green-600 hover:bg-green-700 text-white\" variant=\"default\">\r\n                                        <Check className=\"w-4 h-4\" /> Shortlist\r\n                                    </Button>\r\n                                </form>\r\n\r\n                                <form action={async () => {\r\n                                    \"use server\";\r\n                                    const client = await createClient();\r\n                                    await client.from(\"applications\").update({ status: 'rejected' }).eq(\"id\", application.id);\r\n                                    revalidatePath(`/employer/jobs/${params.id}/applications/${params.applicationId}`);\r\n                                }}>\r\n                                    <Button className=\"w-full flex justify-center items-center gap-2\" variant=\"destructive\">\r\n                                        <X className=\"w-4 h-4\" /> Reject\r\n                                    </Button>\r\n                                </form>\r\n                            </>\r\n                        )}\r\n                        {application.status === 'shortlisted' && (\r\n                            <form action={async () => {\r\n                                \"use server\";\r\n                                const client = await createClient();\r\n                                await client.from(\"applications\").update({ status: 'hired' }).eq(\"id\", application.id);\r\n                                revalidatePath(`/employer/jobs/${params.id}/applications/${params.applicationId}`);\r\n                            }}>\r\n                                <Button className=\"w-full flex justify-center items-center gap-2 bg-gradient-to-r from-primary to-blue-600 text-white\" variant=\"default\">\r\n                                    <Building className=\"w-4 h-4\" /> Hire Candidate\r\n                                </Button>\r\n                            </form>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\jobs\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4483,4486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4483,4486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getUserProfile } from \"@/utils/auth\";\r\nimport { createClient } from \"@/utils/supabase/server\";\r\nimport { notFound, redirect } from \"next/navigation\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, User, FileText } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport default async function EmployerJobDetailPage({ params }: { params: { id: string } }) {\r\n    const profile = await getUserProfile();\r\n    if (!profile || profile.role !== \"employer\") {\r\n        redirect(\"/login\");\r\n    }\r\n\r\n    const supabase = await createClient();\r\n\r\n    // 1. Fetch Job\r\n    const { data: job, error: jobError } = await supabase\r\n        .from(\"job_posts\")\r\n        .select(\"*\")\r\n        .eq(\"id\", params.id)\r\n        .eq(\"author_id\", profile.id)\r\n        .single();\r\n\r\n    if (jobError || !job) {\r\n        notFound();\r\n    }\r\n\r\n    // 2. Fetch Applicants\r\n    const { data: applicants } = await supabase\r\n        .from(\"applications\")\r\n        .select(`\r\n      id,\r\n      status,\r\n      created_at,\r\n      candidate:candidate_profiles(\r\n        id,\r\n        first_name,\r\n        last_name,\r\n        bio,\r\n        skills\r\n      )\r\n    `)\r\n        .eq(\"job_id\", job.id)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n    return (\r\n        <div className=\"flex-1 space-y-8 p-8 pt-10\">\r\n            <div className=\"flex items-center space-x-4 mb-4\">\r\n                <Button variant=\"ghost\" size=\"icon\" asChild>\r\n                    <Link href=\"/employer/dashboard\"><ArrowLeft className=\"h-5 w-5\" /></Link>\r\n                </Button>\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold tracking-tight\">{job.title}</h2>\r\n                    <div className=\"flex items-center mt-2 space-x-3\">\r\n                        <Badge variant={job.status === 'published' ? 'default' : 'secondary'} className=\"capitalize\">\r\n                            {job.status}\r\n                        </Badge>\r\n                        <span className=\"text-sm text-muted-foreground\">{job.location || 'Remote'}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-7 border-t pt-8\">\r\n                <Card className=\"col-span-2\">\r\n                    <CardHeader>\r\n                        <CardTitle>Job Stats</CardTitle>\r\n                        <CardDescription>Overview of post performance</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"flex justify-between items-center border-b pb-2\">\r\n                            <span className=\"text-muted-foreground\">Total Applicants</span>\r\n                            <span className=\"font-bold\">{applicants?.length || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between items-center border-b pb-2\">\r\n                            <span className=\"text-muted-foreground\">Hired</span>\r\n                            <span className=\"font-bold\">\r\n                                {applicants?.filter((a: { status: string }) => a.status === 'hired').length || 0}\r\n                            </span>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"col-span-5\">\r\n                    <CardHeader>\r\n                        <CardTitle>Candidates ({applicants?.length || 0})</CardTitle>\r\n                        <CardDescription>Review and manage incoming applications</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {!applicants || applicants.length === 0 ? (\r\n                            <div className=\"text-center p-8 bg-muted/20 border border-dashed rounded-lg\">\r\n                                <User className=\"w-10 h-10 mx-auto text-muted-foreground mb-4 opacity-50\" />\r\n                                <p className=\"font-medium\">No applicants yet.</p>\r\n                                <p className=\"text-sm text-muted-foreground mt-1\">When candidates apply, they will appear here.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-4\">\r\n                                {applicants.map((app: any) => {\r\n                                    const candidate = Array.isArray(app.candidate) ? app.candidate[0] : app.candidate;\r\n                                    const name = candidate?.first_name && candidate?.last_name\r\n                                        ? `${candidate.first_name} ${candidate.last_name}`\r\n                                        : \"Anonymous Candidate\";\r\n\r\n                                    return (\r\n                                        <div key={app.id} className=\"flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-lg hover:shadow-sm transition-shadow\">\r\n                                            <div className=\"space-y-1\">\r\n                                                <h4 className=\"font-semibold\">{name}</h4>\r\n                                                <p className=\"text-sm text-muted-foreground line-clamp-1\">{candidate?.bio || \"No summary provided.\"}</p>\r\n                                                <div className=\"flex items-center gap-2 mt-2\">\r\n                                                    <Badge variant=\"outline\" className=\"capitalize text-xs\">{app.status}</Badge>\r\n                                                    <span className=\"text-xs text-muted-foreground\">\r\n                                                        Applied {new Date(app.created_at).toLocaleDateString()}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2 shrink-0\">\r\n                                                <Button variant=\"outline\" size=\"sm\" asChild>\r\n                                                    <Link href={`/employer/jobs/${job.id}/applications/${app.id}`}>\r\n                                                        <FileText className=\"w-4 h-4 mr-2\" />\r\n                                                        Review\r\n                                                    </Link>\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\messages\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\messages\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\post-job\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\post-job\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\profile\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\employer\\profile\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(app)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(auth)\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(auth)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(auth)\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(auth)\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\jobs\\[id]\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\jobs\\[id]\\apply-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\jobs\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\jobs\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2435,2438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2435,2438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\(public)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\chat\\ChatUI.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[501,504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[501,504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1998,2001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1998,2001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useActionState, useRef, useEffect } from \"react\";\r\nimport { sendMessage } from \"./actions\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Loader2, Send } from \"lucide-react\";\r\n\r\nexport function ChatInput({ conversationId, role }: { conversationId: string, role: string }) {\r\n    const formRef = useRef<HTMLFormElement>(null);\r\n    const [state, formAction, isPending] = useActionState(\r\n        async (prevState: any, formData: FormData) => {\r\n            const result = await sendMessage(formData);\r\n            if (result.success && formRef.current) {\r\n                formRef.current.reset();\r\n            }\r\n            return result;\r\n        },\r\n        null\r\n    );\r\n\r\n    return (\r\n        <div className=\"p-4 border-t bg-background sticky bottom-0 z-10\">\r\n            <form action={formAction} ref={formRef} className=\"flex gap-2 relative max-w-4xl mx-auto\">\r\n                <input type=\"hidden\" name=\"conversation_id\" value={conversationId} />\r\n                <input type=\"hidden\" name=\"role\" value={role} />\r\n\r\n                <Input\r\n                    name=\"body\"\r\n                    placeholder=\"Type a message...\"\r\n                    autoComplete=\"off\"\r\n                    required\r\n                    className=\"flex-1 bg-muted/50 border-muted-foreground/20 focus-visible:ring-primary shadow-inner\"\r\n                    disabled={isPending}\r\n                />\r\n\r\n                <Button type=\"submit\" size=\"icon\" disabled={isPending} className=\"shrink-0 transition-all hover:scale-105\">\r\n                    {isPending ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Send className=\"h-5 w-5\" />}\r\n                </Button>\r\n            </form>\r\n            {state?.error && (\r\n                <p className=\"text-destructive text-sm mt-2 text-center\">{state.error}</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ChatMessages({ messages, currentUserId }: { messages: any[], currentUserId: string }) {\r\n    const bottomRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    return (\r\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 max-w-4xl mx-auto w-full\">\r\n            {messages.map((msg) => {\r\n                const isMe = msg.sender_id === currentUserId;\r\n                return (\r\n                    <div key={msg.id} className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}>\r\n                        <div\r\n                            className={`max-w-[80%] rounded-2xl px-4 py-2 text-sm md:text-base leading-relaxed break-words shadow-sm ${isMe\r\n                                    ? 'bg-primary text-primary-foreground rounded-br-sm'\r\n                                    : 'bg-muted text-foreground border rounded-bl-sm'\r\n                                }`}\r\n                        >\r\n                            {msg.body}\r\n                            <div className={`text-[10px] mt-1 ${isMe ? 'text-primary-foreground/70 text-right' : 'text-muted-foreground'}`}>\r\n                                {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n            <div ref={bottomRef} />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\chat\\ConversationView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\chat\\InboxList.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2170,2173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2170,2173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getUserProfile } from \"@/utils/auth\";\r\nimport { createClient } from \"@/utils/supabase/server\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport Link from \"next/link\";\r\nimport { MessageSquare } from \"lucide-react\";\r\n\r\nexport async function InboxList({ role }: { role: string }) {\r\n    const profile = await getUserProfile();\r\n    if (!profile) return null;\r\n\r\n    const supabase = await createClient();\r\n\r\n    // Determine query based on role\r\n    let query = supabase\r\n        .from(\"conversations\")\r\n        .select(`\r\n      id,\r\n      application_id,\r\n      created_at,\r\n      application:applications!inner(\r\n         status,\r\n         job:job_posts!inner(title, company:companies(name)),\r\n         candidate:candidate_profiles(first_name, last_name)\r\n      )\r\n    `);\r\n\r\n    if (role === 'employer') {\r\n        query = query.eq('employer_id', profile.id);\r\n    } else {\r\n        query = query.eq('candidate_id', profile.id);\r\n    }\r\n\r\n    const { data: conversations, error } = await query.order('created_at', { ascending: false });\r\n\r\n    if (error || !conversations) {\r\n        return <div className=\"text-muted-foreground p-8 text-center border-dashed border rounded-xl bg-muted/20\">Could not load messages.</div>;\r\n    }\r\n\r\n    if (conversations.length === 0) {\r\n        return (\r\n            <div className=\"flex flex-col items-center justify-center p-16 text-center border-dashed border rounded-xl bg-muted/20\">\r\n                <MessageSquare className=\"w-10 h-10 text-muted-foreground opacity-50 mb-4\" />\r\n                <span className=\"font-semibold text-input mb-1\">Your Inbox is Empty</span>\r\n                <span className=\"text-sm text-muted-foreground max-w-sm\">\r\n                    {role === 'employer' ? \"Start a conversation with applicants from the job details page.\" : \"When employers reach out, their messages will appear here.\"}\r\n                </span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid gap-4 md:grid-cols-2 max-w-5xl mx-auto w-full\">\r\n            {conversations.map((conv: any) => {\r\n                // Normalize application response due to one-to-one joining \r\n                const app = Array.isArray(conv.application) ? conv.application[0] : conv.application;\r\n                const candidate = Array.isArray(app.candidate) ? app.candidate[0] : app.candidate;\r\n                const name = candidate?.first_name ? `${candidate.first_name} ${candidate.last_name || \"\"}` : \"Anonymous\";\r\n                const title = `${app.job.title} at ${app.job.company?.name || \"Company\"}`;\r\n\r\n                const subjectName = role === 'employer' ? name : app.job.company?.name;\r\n\r\n                return (\r\n                    <Link key={conv.id} href={`/${role}/messages/${conv.id}`}>\r\n                        <Card className=\"hover:border-primary/50 transition-colors shadow-sm cursor-pointer h-full border-muted\">\r\n                            <CardHeader className=\"pb-3\">\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <CardTitle className=\"text-lg\">{subjectName}</CardTitle>\r\n                                    <Badge variant=\"outline\" className=\"text-xs\">{app.status}</Badge>\r\n                                </div>\r\n                                <CardDescription className=\"line-clamp-1\">{title}</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"text-xs text-muted-foreground flex items-center justify-end\">\r\n                                    Started ΓÇó {new Date(conv.created_at).toLocaleDateString()}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Link>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\chat\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\layout\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\layout\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\utils\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\utils\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\utils\\supabase\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rayma\\OneDrive\\Documents\\Projects\\TeamoraPH\\src\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
